<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cube Base Defense</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>

        <!-- Menu Principal -->
        <div id="menu" class="overlay-menu">
            <div class="title">CUBE BASE DEFENSE</div>
            <div class="subtitle">
                ProtÃ©gez votre Noyau PrÃ©cieux des vagues d'ennemis !<br>
                Construisez, amÃ©liorez et survivez aussi longtemps que possible.
            </div>
            <button class="btn" id="startGameBtn">NOUVELLE PARTIE</button>
            <button class="btn" id="showRulesBtnMenu">RÃˆGLES</button>
            <div id="highScoresContainer">
                <h3 style="margin-bottom: 10px;">MEILLEURS SCORES</h3>
                <table id="highScoresTable">
                    <thead><tr><th>#</th><th>Score</th><th>Vague</th><th>Temps</th></tr></thead>
                    <tbody id="highScoresBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOver" class="overlay-menu">
            <div class="title">NOYAU DÃ‰TRUIT</div>
            <div class="score" id="finalScore">Score: 0</div>
            <div class="subtitle" id="gameOverText"></div>
            <button class="btn" id="restartGameBtn">REJOUER</button>
            <button class="btn" id="goToMenuBtnGameOver">MENU PRINCIPAL</button>
        </div>

        <!-- Pause Menu -->
        <div id="pauseMenu" class="overlay-menu">
            <div class="title">PAUSE</div>
            <button class="btn" id="resumeGameBtn">REPRENDRE</button>
            <button class="btn" id="openShopPauseBtn">SHOP (Pause)</button>
            <button class="btn" id="goToMenuBtnPause">MENU PRINCIPAL</button>
        </div>

        <!-- Shop Menu -->
        <div id="shopMenu">
            <div class="title" style="font-size: 32px; margin-bottom: 10px;">SHOP</div>
            <div style="margin-bottom: 15px; font-size: 16px;">Cash: <span id="shopCashDisplay">0</span> ðŸ’²</div>
            <div id="shopItemsContainer" style="width: 100%;"></div>
            <button class="btn" id="closeShopBtn" style="margin-top: 15px;">FERMER</button>
        </div>

        <!-- Game UI Elements -->
        <div id="ui" style="display: none;">
            <div class="rule"><strong>Cubes:</strong> <span id="cubeCount">0</span></div>
            <div class="rule"><strong>Score:</strong> <span id="score">0</span></div>
            <div class="rule"><strong>Vague:</strong> <span id="wave">0</span></div>
            <div class="rule"><strong>Cash:</strong> <span id="cashDisplay">0</span> ðŸ’²</div>
            <div class="rule"><strong>Temps:</strong> <span id="survivalTime">0</span>s</div>
        </div>
        <div class="rule"><strong>Prod. Cubes:</strong> <span id="cubeProductionRate">0</span> /s</div>
        <div id="inGameUpgrades" style="display: none;"> <!-- Ou une meilleure position -->
            <div style="font-weight: bold; margin-bottom: 8px; color: #f0f0f0;">âš¡ AMÃ‰LIORATIONS</div>
            <div id="upgradesList">
            </div>
        </div>
        <div id="powersPanel" style="display: none;"> <!-- CSS le positionnera -->
            <div style="font-weight: bold; margin-bottom: 8px; color: #f0f0f0;">âš¡ POUVOIRS</div>
            <div id="powersList"></div>
        </div>
        <div class="base-health-bar-container" style="display: none;">
            <div id="baseHealthBar" class="base-health-bar">Noyau: 100%</div>
        </div>

        <div id="objectives" style="display: none;">
            <div style="font-weight: bold; margin-bottom: 8px; color: #f0f0f0;">ðŸŽ¯ OBJECTIFS</div>
            <div id="objectiveList"></div>
        </div>
        
        <div id="instructions" style="display: none;">
            <div><strong>CONTRÃ”LES:</strong></div>
            <div>Clic G: Placer/Construire</div>
            <div>Clic D: Supprimer Cube/Annuler</div>
            <div>WASD: DÃ©placer CamÃ©ra</div>
            <div>P / Echap: Pause/Menu</div>
            <div><br><strong>ASTUCES:</strong></div>
            <div>â€¢ Les ennemis ont des PV.</div>
            <div>â€¢ Achetez des amÃ©liorations au Shop!</div>
        </div>
        <div id="gameControls" style="display: none;">
            <button id="shopButton" class="btn">SHOP</button>
            <button id="pauseButton" class="btn">PAUSE</button>
        </div>

        <!-- Notifications -->
        <div id="notificationContainer"></div>
    </div>
    <script type="module" src="js/main.js"></script>
</body>
</html>